# Create Thread and Run API (Beta)

## Overview
Create a thread and run it in one request.

## Endpoint
```
POST https://api.openai.com/v1/threads/runs
```

## Request Body

### Required Parameters

#### assistant_id
- Type: `string`
- Required: Yes
- Description: The ID of the assistant to use to execute this run.

### Optional Parameters

#### thread
- Type: `object`
- Optional: Yes
- Description: Thread configuration object

#### messages
- Type: `array`
- Optional: Yes
- Description: A list of messages to start the thread with.

##### Message Object Structure
- **role** (Required)
  - Type: `string`
  - Allowed values:
    - `user`: Indicates the message is sent by an actual user
    - `assistant`: Indicates the message is generated by the assistant

- **content** (Required)
  - Type: `string` or `array`
  - Can be either:
    1. Text content (string)
       - Description: The text contents of the message
    2. Array of content parts
       - Description: An array of content parts with defined types (text or images)
       - Supported types:
         - Text
         - Image URL
         - Image File (only for Vision-compatible models)

##### Content Types

###### Text Content
- Type: `object`
- Properties:
  - **type**: `string` (Always "text")
  - **text**: `string` (Required) - Text content to be sent to the model

###### Image File
- Type: `object`
- Description: References an image File in the content of a message

###### Image URL
- Type: `object`
- Description: References an image URL in the content of a message

#### attachments
- Type: `array` or `null`
- Optional: Yes
- Description: A list of files attached to the message, and the tools they should be added to.

#### file_id
- Type: `string`
- Optional: Yes
- Description: The ID of the file to attach to the message.

#### tools
- Type: `array`
- Optional: Yes
- Description: The tools to add this file to.

##### Code Interpreter Tool
- Type: `object`
- Properties:
  - **type**: `string` (Always "code_interpreter")

##### File Search Tool
- Type: `object`
- Properties:
  - **type**: `string` (Always "file_search")

#### metadata
- Type: `map`
- Optional: Yes
- Description: Set of 16 key-value pairs that can be attached to an object.

#### tool_resources
- Type: `object` or `null`
- Optional: Yes
- Description: A set of resources that are made available to the assistant's tools in this thread.

##### Code Interpreter
- Type: `object`
- Optional: Yes
- Properties:
  - **file_ids**: `array` (Optional) - A list of file IDs made available to the code_interpreter tool.

##### File Search
- Type: `object`
- Optional: Yes
- Properties:
  - **vector_store_ids**: `array` (Optional) - The vector store attached to this thread.

#### vector_stores
- Type: `array`
- Optional: Yes
- Description: A helper to create a vector store with file_ids and attach it to this thread.

##### File IDs
- Type: `array`
- Optional: Yes
- Description: A list of file IDs to add to the vector store.

#### chunking_strategy
- Type: `object`
- Optional: Yes
- Description: The chunking strategy used to chunk the file(s).

##### Auto Chunking Strategy
- Type: `object`
- Description: The default strategy.

##### Static Chunking Strategy
- Type: `object`
- Properties:
  - **type**: `string` (Always "static")
  - **max_chunk_size_tokens**: `integer` (Required) - The maximum number of tokens in each chunk.
  - **chunk_overlap_tokens**: `integer` (Required) - The number of tokens that overlap between chunks.

#### metadata
- Type: `map`
- Optional: Yes
- Description: Set of 16 key-value pairs that can be attached to a vector store.

#### model
- Type: `string`
- Optional: Yes
- Description: The ID of the Model to be used to execute this run.

#### instructions
- Type: `string` or `null`
- Optional: Yes
- Description: Override the default system message of the assistant.

#### tools
- Type: `array` or `null`
- Optional: Yes
- Description: Override the tools the assistant can use for this run.

#### tool_resources
- Type: `object` or `null`
- Optional: Yes
- Description: A set of resources that are used by the assistant's tools.

##### Code Interpreter
- Type: `object`
- Optional: Yes
- Properties:
  - **file_ids**: `array` (Optional) - A list of file IDs made available to the code_interpreter tool.

##### File Search
- Type: `object`
- Optional: Yes
- Properties:
  - **vector_store_ids**: `array` (Optional) - The ID of the vector store attached to this assistant.

#### temperature
- Type: `number` or `null`
- Optional: Yes
- Description: What sampling temperature to use, between 0 and 2.

#### top_p
- Type: `number` or `null`
- Optional: Yes
- Description: An alternative to sampling with temperature.

#### stream
- Type: `boolean` or `null`
- Optional: Yes
- Description: If true, returns a stream of events that happen during the Run as server-sent events.

#### max_prompt_tokens
- Type: `integer` or `null`
- Optional: Yes
- Description: The maximum number of prompt tokens that may be used over the course of the run.

#### max_completion_tokens
- Type: `integer` or `null`
- Optional: Yes
- Description: The maximum number of completion tokens that may be used over the course of the run.

#### truncation_strategy
- Type: `object`
- Optional: Yes
- Description: Controls for how a thread will be truncated prior to the run.

##### Type
- Type: `string`
- Required: Yes
- Description: The truncation strategy to use for the thread.

##### Last Messages
- Type: `integer` or `null`
- Optional: Yes
- Description: The number of most recent messages from the thread when constructing the context for the run.

#### tool_choice
- Type: `string` or `object`
- Optional: Yes
- Description: Controls which (if any) tool is called by the model.

##### String
- Type: `string`
- Allowed values:
  - `none`: The model will not call any tools and instead generates a message.
  - `auto`: The model can pick between generating a message or calling one or more tools.
  - `required`: The model must call one or more tools before responding to the user.

##### Object
- Type: `object`
- Properties:
  - **type**: `string` (Required) - The type of the tool.
  - **function**: `object` (Optional) - The function to call.

#### response_format
- Type: `"auto"` or `object`
- Optional: Yes
- Description: Specifies the format that the model must output.

##### Auto
- Type: `"auto"`
- Description: The default format.

##### JSON Schema
- Type: `object`
- Properties:
  - **type**: `string` (Always "json_schema")
  - **json_schema**: `object` (Required) - The JSON schema to use.

##### JSON Object
- Type: `object`
- Properties:
  - **type**: `string` (Always "json_object")

## Returns
A run object.